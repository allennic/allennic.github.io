<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.2" />






<meta property="og:type" content="website">
<meta property="og:title" content="Allen for Hacking">
<meta property="og:url" content="http://allennic.top/index.html">
<meta property="og:site_name" content="Allen for Hacking">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Allen for Hacking">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://allennic.top/"/>


  <title> Allen for Hacking </title>
</head>

<body itemscope itemtype="//schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="//schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  
  
  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Allen for Hacking</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
  
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
            标签
          </a>
        </li>
      
      
      
    </ul>
  

  

<embed style="margin-left:-70%; margin-top:-25px; margin-bottom:-29px;" src="http://www.xiami.com/widget/28331565_1769630229,1769033941,1771121512,1770658453,388391,_235_346_cccccc_dddddd_1/multiPlayer.swf" type="application/x-shockwave-flash" width="235" height="120" wmode="opaque"></embed>  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/08/15/summary/" itemprop="url">
                  阶段总结
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-08-15T23:18:37+08:00" content="2017-08-15">
              2017-08-15
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><a href="#1">0x01</a></li>
</ul>
<ul>
<li><a href="#2">0x02</a>    </li>
</ul>
<hr>
<h2 id="1">0x01</h2>


<p>转眼都快步入安全圈三个月了。</p>
<p>回想第一周开始熟悉工作坏境，把工作所需的环境搭起来。</p>
<p>第一周是蛮亢奋的。其中搭建nessus真是虐得绝望，后来用网络上的临时邮箱不断申请激活码才搭建成功。恰巧iscc比赛还在火热进行中，明哥叫我注册个账号玩玩。最后ichunqiu给了个福利，给每个账号一个月的时间学习企安殿的课程。当时就看了知道创宇的课程还有android逆向的课程，android逆向后面几周就被我当成自己的side project来捣鼓。</p>
<p>第二周，开始去移动驻场，然后按照周任务表开始挖洞了。但是都是些java站的登录框，很是蛋疼。基本都是丢awvs进行扫描。对于有验证码的站，使用pkav的工具来做重放，可实现爆破。因为任务比较松，期间重新搭起sqli-lab来复习手注，写shell和修改字段数据重点看了下。</p>
<p>第三周，周任务是内网的几个c段，只能扫一些服务端口还有可以爆破的端口，期间尝试了hydra、medusa这两款工具，之后才知道nmap其实也可以做简单的弱口令爆破。nmap导出的参数比较喜欢用-oA，导出的xml可以很好做整理。还有就是扫段的话，nessus是必不可少的利器，可以结合msf去做一些很好的验证。</p>
<p>第四周，大抵同上周一样。想说的是，回去捣鼓的android逆向因为android killer反编译不出smali代码，掉了几晚的坑，后面还是用apktool直接反编译，修改点smali源码再回编译。感受最深的是一步一步看smali代码大概还原成java代码，明白程序的逻辑。</p>
<p>第五周，开始收集自己的一些做fuzz的小字典，遇到两个有意思的洞，一个是DS.store源码泄露，一个是redis未授权访问，结合自己以前捣鼓的，把自己主机key写入对方的authorized_keys中，期间还尝试再/tmp路径写一句话木马。这周主要还看了smb（ms17-010）这个洞的复现文章，使用ShadowBroker的FUZZBUNCH框架，被坑的是msfvenom生成的后门对于windows版本是有影响的，当时复现生成32位的后门放到64位的windows上，愣是没有反弹shell回来。。<br>知道set rhost也可用file://做批量扫描，在msf中扫描完的结果可以自动保存入库，用services -r tcp -p 445 -R在另外的模块就可不用设置rhost。<br>用sparta做扫描时，生成的sql文件，去折腾了下（取出想要的数据），其中select ip from db_tables_nmap_host where id in (select host_id from db_tables_nmap_port where port_id=’445’ and state=’open’);这个联表查询真的是感觉自己好久没写sql了。。</p>
<p>第六周，按时完成周任务外，看了一些反弹shell的各种写法、ssh端口转发、crontab后门的一些文章。android逆向也在这周夭折，因为准备要用root过之后的手机做真机调试时，win10不断报错不断重启。</p>
<p>第七-八周，检查外网十来个段的弱口令，处于内网的kali上的工具nmap、hydra、medusa对于扫描和爆破都出现误报，基本是不准确的。这时就结合之前玩过的docker在vps上直接安装kali，对于扫描工具，也在vps上搭了masscan和zmap，没再出现过误报的情况。<br>之后的任务基本上是：公网段用vps上docker搭建的kali，内网段则用虚拟机上的kali。</p>
<p>第九周，周任务为几个内网段，这周刚好在t00ls水贴满要求，可以阅读全部的板块（但是权限高于20的贴还是不能阅读。。）对于内网渗透文章印象最深刻的是域渗透。</p>
<p>第十周，周任务转为外网十来个web站点，这周对于awvs又有个新的认识，其扫到一个文件上传漏洞，我想把请求头复制到burp去做重放，后面复制复制着发现在awvs也可以直接修改请求头且能重放，真是后知后觉。。</p>
<p>第十一周，周任务也是web站点，开始使用sqlipy、bybass WAF、Domain hunter、J2eescan等bp上的一些插件，其中Domain hunter结合bp的爬虫跑出的子域名真是完爆github上的一些开源工具，sqlipy更自动化完成注入。<br>其中导入的jython-standalone不要放在以中文命名的路径导入。由于搭了个nginx来做ssrf的测试，开始注意一些日志的访问，看到n多找后台的这种请求，想统计下ip的访问量和web请求路径出现的次数，看了一些用sed和awk处理日志的文章<br>对于sqlmap上的tamper开始慢慢试用起来，有奇效！挖了几个oracle的SQL盲注。</p>
<p>第十二周，周任务同为web站点，这周有一个unicode编码问题造成的反射型xss，因为不知道怎么把想测试的payload转成技术文章中讲到的编码格式，在t00ls上做了一回伸手党，还真有大佬共享了这个工具！这周还用mamp pro搭了php的环境，拉了t00ls上开源的的cms来做漏洞复现</p>
<p>流水账写完。</p>
<h2 id="2">0x02</h2>


<p>将近三个月来的周任务能按时按量的完成，对于漏洞的质量也在不断提升。</p>
<p>感觉自己最大的进步有三点。一是对于一定量的渗透任务不在惧怕，可以承受慢慢累加的压力。二是对于渗透过程中要随时做记录，自己比以前做的更细节到位，以前做开发时可能要随手记录一个代码片段或者写个注释，相对少点。但是渗透要做的记录多而杂，要求你能从众多信息中找到一个突破口，很考验你做记录所标的轻重缓急。三是对于漏洞的原理上更为深刻，工具的使用上更为娴熟。<br>这三点可能都能为自己以后的发展打下更好的基石</p>
<p>对于自己应该要改进的应该是少熬夜不迟到。另外，对于自己遇到的问题感觉都能从google或者一些论坛找到解决方案。我觉得过于简单的问题提出可能就不足以显示你的能力。所以一般都是在不影响工作的情况下自己解决。<br>最后想对公司提些个人看法，对于以技术、技术服务为支撑的公司，我觉得内部应该要多点技术交流(包括但不限于自己解决的一些问题、自己在捣鼓的一些项目让你有哪些挫败亦或成就感)</p>
<p>最后，想感谢智哥和洋哥能给我提供这次机会！</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/10/proxy-md/" itemprop="url">
                  反向代理设置
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-04-10T18:17:14+08:00" content="2017-04-10">
              2017-04-10
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><a href="#1">apache</a></li>
<li><a href="#2">nginx</a></li>
</ul>
<hr>
<h2 id="1">apache</h2>

<p>我们在apache上设置一个网站，用nginx来代理</p>
<p>apache配置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&lt;VirtualHost *:9905&gt;</div><div class="line">    DocumentRoot &quot;/var/web/ife-2017&quot;</div><div class="line">    ServerName 127.0.0.1</div><div class="line">    ErrorLog &quot;/private/var/log/apache2/127.0.0.1-error_log&quot;</div><div class="line">    CustomLog &quot;/private/var/log/apache2/127.0.0.1-access_log&quot; common</div><div class="line">&lt;/VirtualHost&gt;</div><div class="line"></div><div class="line">&lt;Directory &quot;/var/web/ife-2017&quot;&gt;</div><div class="line">    Options Indexes FollowSymLinks MultiViews</div><div class="line">    MultiviewsMatch Any</div><div class="line">    Order deny,allow</div><div class="line">    Allow from all</div><div class="line">    Require all granted</div><div class="line">    AllowOverride All</div><div class="line">&lt;/Directory&gt;</div></pre></td></tr></table></figure>
<h2 id="2">nginx</h2>

<p>nginx配置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">server &#123;</div><div class="line">    listen       8085;</div><div class="line">    server_name  localhost;</div><div class="line">    </div><div class="line"></div><div class="line">    error_log   /usr/local/var/logs/nginx/error.log;</div><div class="line">    access_log  /usr/local/var/logs/nginx/access.log main;</div><div class="line"></div><div class="line">    ssl                  off;</div><div class="line">    ssl_certificate      ssl/phpmyadmin.crt;</div><div class="line">    ssl_certificate_key  ssl/phpmyadmin.key;</div><div class="line"></div><div class="line">    ssl_session_timeout  5m;</div><div class="line"></div><div class="line">    ssl_protocols  SSLv2 SSLv3 TLSv1;</div><div class="line">    ssl_ciphers  HIGH:!aNULL:!MD5;</div><div class="line">    ssl_prefer_server_ciphers   on;</div><div class="line"></div><div class="line">    location / &#123;</div><div class="line">       proxy_set_header        Host $http_host;</div><div class="line">	    proxy_pass http://localhost:9905;</div><div class="line">        </div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>8085可以访问9905的资源即配置成功，proxy_pass可能增加nginx的压力，在nginx配置的其他网站，可以重启php-fpm来消除缓存，然后在访问其他网站</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="//schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/me.png"
               alt="Mr Huang" />
          <p class="site-author-name" itemprop="name">Mr Huang</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">10</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">1</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">1</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        
      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Mr Huang</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.2"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.2"></script>



  



  




  
  

  

  

  

  


</body>
</html>
